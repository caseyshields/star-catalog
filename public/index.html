<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Fundamental Catalog 6</title>
        <!-- <link href="../site.css" rel="stylesheet" /> -->
        <style>
            .overlay {
                position: absolute;
                top: 10%;
                left: 10%;
            }
            svg {
                position: absolute;
                left: 0;
                top: 0;
                z-index: -1;
            }
        </style>
    </head>
    <body>
        <div class="overlay">
            <h1> Fundamental Catalog 6 </h1>
            <h4> A catalog of stars suitable for high precision astrometry. </h4>
            <h4> brightness threshold:<input type="range" value="0.1" min="0.0" max="1.0" onchange="adjust(this.value)" step="0.01"></h4>
        </div>
        <section>
            <svg width="1024" height="1024" style="background-color:#888"></svg>
        </section>
        <!-- <div id="output"></div> -->
        
        <script src="https://d3js.org/d3.v5.js"></script>
        <script>

            let w = 1024;
            let h = 1024;

            let svg = d3.select('svg');
            let stars = d3.selectAll('circle');

            // define a scale for visual magnitude
            let magnitudeScale = d3.scaleLinear()
                .range()
                .domain();

            let projection = d3.geoStereographic()
                .translate( [w/2, h/2] )
                .scale( w );

            d3.json("stars.json").then(function(catalog) {

                // convert arc hour, minute, seconds to degrees
                for (star of catalog) {
                    star.ra = star.RAh + (star.RAm/60.0) + (star.RAs/3600.0);
                    star.dec = star.DEd + (star.DEm/60.0) + (star.DEs/3600.0);
                    if(star['DE-']=='-')
                        star.dec*=-1;
                    console.log(star);
                }

                // data join
                stars.data(catalog)
                    .enter().append('circle')
                    //.attr('cx', (d)=>{projection(d.ra, d.dec)} )
                    .attr()

            });
        </script>
    </body>
</html>